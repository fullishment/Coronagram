<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="adminMain">
<!--회원관리 list 불러오기 -->
	<select id="getAdminM" parameterType="hashmap" resultType="hashmap">
			SELECT COUNT(*) AS TOTALCOUNT
       			, COUNT(CASE WHEN TO_CHAR(M_DT,'YYYYMMDD') = TO_CHAR(SYSDATE,'YYYYMMDD') THEN 1 END) AS DAYCOUNT 
       			, COUNT(CASE WHEN ACCT_TYPE_NO=6 THEN 1 END)ADMINCOUNT
				FROM M
	</select>

<!--Q&A list -->
		<select id="getadminQnaList" parameterType="hashmap" resultType="hashmap">
			SELECT I.QNA_NO,I.M_NM,I.TITLE,I.IMG_ADR,I.Q_DT, I.DEL, I.ANS_CON
        	FROM (SELECT Q.QNA_NO,M.M_NM,Q.TITLE, M.IMG_ADR, Q.Q_DT, Q.DEL, Q.ANS_CON
	            ,ROW_NUMBER() OVER(ORDER BY Q.Q_DT DESC) AS RNUM
	            FROM M M
	            INNER JOIN QNA Q
	            ON M.M_NO = Q.WRITER_NO) I
	             <![CDATA[
	            WHERE I.RNUM <10 
	            ]]>
	            AND i.del=1 AND I.ANS_CON IS NULL
	            ORDER BY I.Q_DT DESC
		</select>
<!-- 새 질문 -->
		<select id="getNewQ" parameterType="hashmap" resultType="hashmap">
			SELECT COUNT(CASE WHEN ans_con is null and del=1 THEN 1 END) AS newQ
			FROM qna
		</select>
</mapper>